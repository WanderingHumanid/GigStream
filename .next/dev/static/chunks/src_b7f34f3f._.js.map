{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/app/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport db from '@/lib/db';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { cookies } from 'next/headers';\r\n\r\n// --- Auth Actions ---\r\n\r\nexport async function signup(currentState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n    const name = formData.get('name') as string;\r\n\r\n    if (!email || !password || !name) {\r\n        return { success: false, message: 'All fields are required' };\r\n    }\r\n\r\n    try {\r\n        const stmt = db.prepare('INSERT INTO users (email, password, name) VALUES (?, ?, ?)');\r\n        const result = stmt.run(email, password, name);\r\n\r\n        // Simple cookie session\r\n        (await cookies()).set('user_id', result.lastInsertRowid.toString());\r\n        (await cookies()).set('user_name', name); // For easy access\r\n\r\n        return { success: true, message: 'Account created' };\r\n    } catch (error: any) {\r\n        if (error.code === 'SQLITE_CONSTRAINT_UNIQUE') {\r\n            return { success: false, message: 'Email already exists' };\r\n        }\r\n        return { success: false, message: error.message };\r\n    }\r\n}\r\n\r\nexport async function login(currentState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT * FROM users WHERE email = ? AND password = ?');\r\n        const user = stmt.get(email, password) as any;\r\n\r\n        if (!user) {\r\n            return { success: false, message: 'Invalid credentials' };\r\n        }\r\n\r\n        (await cookies()).set('user_id', user.id.toString());\r\n        (await cookies()).set('user_name', user.name);\r\n\r\n        return { success: true, message: 'Login successful', user };\r\n    } catch (error: any) {\r\n        return { success: false, message: error.message };\r\n    }\r\n}\r\n\r\nexport async function logoutAction() {\r\n    (await cookies()).delete('user_id');\r\n    (await cookies()).delete('user_name');\r\n    return { success: true };\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return null;\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT id, name, email FROM users WHERE id = ?');\r\n        const user = stmt.get(userId);\r\n        return user;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\n// --- Delivery Actions ---\r\n\r\n// --- Delivery Actions ---\r\n\r\nexport async function deductPension(amount: number, platform: string = 'Generic') {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: false, message: \"Not authenticated\" };\r\n\r\n    console.log(`Processing deduction for amount: $${amount} from ${platform} for user ${userId}`);\r\n    const pensionCut = amount * 0.01;\r\n\r\n    try {\r\n        const stmt = db.prepare('INSERT INTO deliveries (user_id, platform, amount, pension_cut) VALUES (?, ?, ?, ?)');\r\n        const result = stmt.run(userId, platform, amount, pensionCut);\r\n\r\n        revalidatePath('/dashboard');\r\n        revalidatePath('/pension');\r\n        return { success: true, data: { id: result.lastInsertRowid, amount, pensionCut } };\r\n    } catch (error: any) {\r\n        console.error(\"SQLite Error:\", error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getRecentDeliveries() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: [] }; // Return empty if not logged in\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT * FROM deliveries WHERE user_id = ? ORDER BY created_at DESC LIMIT 10');\r\n        const transactions = stmt.all(userId);\r\n        return { success: true, data: transactions };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n\r\n// --- User Profile Actions ---\r\n\r\nexport async function getUserProfile() {\r\n    // For MVP, user_profile is single row, but we should conceptually link it. \r\n    // Since table schema for user_profile wasn't changed to have user_id (it was a singleton mock), \r\n    // we will keep it as is for now, or assume row 1 is the current user. \r\n    // The prompt asked for \"Recent Activities\" specifically to be user logged.\r\n    try {\r\n        const user = db.prepare('SELECT * FROM user_profile LIMIT 1').get();\r\n        return { success: true, data: user };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateUserProfile(data: { name: string; email: string; retirement_goal: number; daily_delivery_goal: number, contribution_rate?: number }) {\r\n    try {\r\n        const stmt = db.prepare(`\r\n            UPDATE user_profile \r\n            SET name = ?, email = ?, retirement_goal = ?, daily_delivery_goal = ?, contribution_rate = ?\r\n            WHERE id = (SELECT id FROM user_profile LIMIT 1)\r\n        `);\r\n        stmt.run(data.name, data.email, data.retirement_goal, data.daily_delivery_goal, data.contribution_rate || 1.0);\r\n\r\n        revalidatePath('/profile');\r\n        revalidatePath('/dashboard');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// --- Manual Delivery Actions ---\r\n\r\nexport async function logDelivery(platform: string, amount: number) {\r\n    return deductPension(amount, platform);\r\n}\r\n\r\nexport async function getTodayStats() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: { count: 0, total_earnings: 0 } };\r\n\r\n    try {\r\n        const stmt = db.prepare(`\r\n            SELECT \r\n                COUNT(*) as count, \r\n                SUM(amount) as total_earnings \r\n            FROM deliveries \r\n            WHERE user_id = ? AND date(created_at) = date('now')\r\n        `);\r\n        const stats = stmt.get(userId) as { count: number, total_earnings: number };\r\n        return {\r\n            success: true,\r\n            data: {\r\n                count: stats.count || 0,\r\n                total_earnings: stats.total_earnings || 0\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getPensionBalance() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: 0 };\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT SUM(pension_cut) as total FROM deliveries WHERE user_id = ?');\r\n        const result = stmt.get(userId) as { total: number } | undefined;\r\n        return { success: true, data: result?.total || 0 };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getTotalDeliveries() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: 0 };\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT COUNT(*) as count FROM deliveries WHERE user_id = ?');\r\n        const result = stmt.get(userId) as { count: number } | undefined;\r\n        return { success: true, data: result?.count || 0 };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MA+KsB,yBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,sDAAA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/components/PensionTicker.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { getPensionBalance } from \"@/app/actions\";\r\nimport { TrendingUp, Loader2 } from \"lucide-react\";\r\n\r\nexport default function PensionTicker() {\r\n    const [balance, setBalance] = useState<number | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchBalance = async () => {\r\n            const res = await getPensionBalance();\r\n            if (res.success) {\r\n                setBalance(res.data as number);\r\n            }\r\n        };\r\n        fetchBalance();\r\n\r\n        // Optional: Poll every few seconds to keep it \"live\" if user logs delivery in another tab\r\n        const interval = setInterval(fetchBalance, 10000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    if (balance === null) return <div className=\"w-20 h-8 animate-pulse bg-gray-800 rounded-lg\"></div>;\r\n\r\n    return (\r\n        <div className=\"hidden md:flex items-center gap-2 bg-[#18181b] border border-gray-800 rounded-full px-3 py-1.5 text-sm font-bold shadow-sm\">\r\n            <div className=\"w-5 h-5 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-500\">\r\n                <TrendingUp size={12} />\r\n            </div>\r\n            <span className=\"text-emerald-400 font-mono\">\r\n                ${balance.toFixed(2)}\r\n            </span>\r\n            <span className=\"text-gray-600 text-xs font-medium\">Pension</span>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACpB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IAEtD,IAAA,0KAAS;mCAAC;YACN,MAAM;wDAAe;oBACjB,MAAM,MAAM,MAAM,IAAA,0KAAiB;oBACnC,IAAI,IAAI,OAAO,EAAE;wBACb,WAAW,IAAI,IAAI;oBACvB;gBACJ;;YACA;YAEA,0FAA0F;YAC1F,MAAM,WAAW,YAAY,cAAc;YAC3C;2CAAO,IAAM,cAAc;;QAC/B;kCAAG,EAAE;IAEL,IAAI,YAAY,MAAM,qBAAO,6LAAC;QAAI,WAAU;;;;;;IAE5C,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,mOAAU;oBAAC,MAAM;;;;;;;;;;;0BAEtB,6LAAC;gBAAK,WAAU;;oBAA6B;oBACvC,QAAQ,OAAO,CAAC;;;;;;;0BAEtB,6LAAC;gBAAK,WAAU;0BAAoC;;;;;;;;;;;;AAGhE;GA9BwB;KAAA"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Wallet, LogOut, Verified } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport PensionTicker from \"./PensionTicker\";\r\n\r\nexport default function Navbar() {\r\n    const { user, logout } = useAuth();\r\n    // @ts-ignore\r\n    const userInitial = user?.name ? user.name[0] : \"U\";\r\n\r\n    return (\r\n        <nav className=\"sticky top-0 z-50 flex items-center justify-between p-6 border-b border-gray-800/50 bg-[#121212]/80 backdrop-blur-xl\">\r\n            <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center shadow-[0_0_15px_rgba(16,185,129,0.3)]\">\r\n                    <span className=\"font-bold text-black text-xs\">GS</span>\r\n                </div>\r\n                <span className=\"font-bold text-xl tracking-tight text-white\">GigStream</span>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n                {user ? (\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"hidden md:flex items-center gap-1 bg-[#18181b] px-2 py-1.5 rounded-full border border-gray-800/50\">\r\n                            <NavLink href=\"/dashboard\" label=\"Home\" />\r\n                            <div className=\"w-px h-4 bg-gray-800 mx-2\"></div>\r\n                            <NavLink href=\"/yield\" label=\"Yield\" />\r\n                            <NavLink href=\"/pension\" label=\"Pension\" />\r\n                        </div>\r\n\r\n                        <div className=\"hidden lg:block ml-2\">\r\n                            <PensionTicker />\r\n                        </div>\r\n\r\n                        <div className=\"h-6 w-px bg-gray-800 hidden md:block\"></div>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <a href=\"/profile\" className=\"flex items-center gap-3 group\">\r\n                                <span className=\"text-sm font-bold text-gray-400 group-hover:text-white transition-colors text-right hidden sm:block\">\r\n                                    {user.name}\r\n                                </span>\r\n                                <div className=\"w-9 h-9 bg-gradient-to-tr from-emerald-500 to-teal-400 rounded-full border-2 border-[#121212] flex items-center justify-center text-xs font-bold text-black ring-2 ring-emerald-500/20 group-hover:ring-emerald-500/50 transition-all\">\r\n                                    {user.name.charAt(0).toUpperCase()}\r\n                                </div>\r\n                            </a>\r\n                            <button onClick={logout} className=\"p-2 text-gray-500 hover:text-red-400 transition-colors rounded-full hover:bg-white/5\">\r\n                                <LogOut size={18} />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <button className=\"flex items-center gap-2 bg-emerald-500/10 text-emerald-500 px-5 py-2.5 rounded-2xl hover:bg-emerald-500/20 transition-all font-semibold text-sm border border-emerald-500/20 hover:shadow-[0_0_20px_rgba(16,185,129,0.2)]\">\r\n                        <Wallet size={18} />\r\n                        Connect Wallet\r\n                    </button>\r\n                )}\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nfunction NavLink({ href, label }: { href: string; label: string }) {\r\n    return (\r\n        <a href={href} className=\"text-sm font-bold text-gray-400 hover:text-white transition-colors relative group\">\r\n            {label}\r\n            <span className=\"absolute -bottom-1 left-0 w-0 h-0.5 bg-emerald-500 transition-all group-hover:w-full\"></span>\r\n        </a>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAEA;AACA;;;AALA;;;;AAOe,SAAS;;IACpB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,4IAAO;IAChC,aAAa;IACb,MAAM,cAAc,MAAM,OAAO,KAAK,IAAI,CAAC,EAAE,GAAG;IAEhD,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;kCAEnD,6LAAC;wBAAK,WAAU;kCAA8C;;;;;;;;;;;;0BAGlE,6LAAC;gBAAI,WAAU;0BACV,qBACG,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAQ,MAAK;oCAAa,OAAM;;;;;;8CACjC,6LAAC;oCAAI,WAAU;;;;;;8CACf,6LAAC;oCAAQ,MAAK;oCAAS,OAAM;;;;;;8CAC7B,6LAAC;oCAAQ,MAAK;oCAAW,OAAM;;;;;;;;;;;;sCAGnC,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,iJAAa;;;;;;;;;;sCAGlB,6LAAC;4BAAI,WAAU;;;;;;sCAEf,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAE,MAAK;oCAAW,WAAU;;sDACzB,6LAAC;4CAAK,WAAU;sDACX,KAAK,IAAI;;;;;;sDAEd,6LAAC;4CAAI,WAAU;sDACV,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;;;;;;;8CAGxC,6LAAC;oCAAO,SAAS;oCAAQ,WAAU;8CAC/B,cAAA,6LAAC,uNAAM;wCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;yCAK1B,6LAAC;oBAAO,WAAU;;sCACd,6LAAC,mNAAM;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;;;;;AAO5C;GArDwB;;QACK,4IAAO;;;KADZ;AAuDxB,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAmC;IAC7D,qBACI,6LAAC;QAAE,MAAM;QAAM,WAAU;;YACpB;0BACD,6LAAC;gBAAK,WAAU;;;;;;;;;;;;AAG5B;MAPS"}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/components/YieldBattle.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { ArrowRight, Building2, Zap } from \"lucide-react\";\r\n\r\ninterface YieldBattleProps {\r\n    initialPrincipal?: number;\r\n    deliveryCount?: number;\r\n}\r\n\r\nexport default function YieldBattle({ initialPrincipal = 50.00, deliveryCount = 0 }: YieldBattleProps) {\r\n    const principal = initialPrincipal || 50.00;\r\n\r\n    const [bankBalance, setBankBalance] = useState(principal > 0 ? principal : 50);\r\n    const [streamBalance, setStreamBalance] = useState(principal > 0 ? principal : 50);\r\n\r\n    const isDemo = principal === 0;\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            setBankBalance(prev => prev + 0.000001);\r\n            setStreamBalance(prev => prev + 0.0005);\r\n        }, 50);\r\n\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    const bankGain = bankBalance - principal;\r\n    const streamGain = streamBalance - principal;\r\n    const diffMultiplier = (streamGain / (bankGain || 0.000001)).toFixed(1);\r\n\r\n    return (\r\n        <div className=\"w-full max-w-6xl mx-auto px-6 mb-12\">\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 30 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                transition={{ duration: 0.6 }}\r\n                className=\"grid grid-cols-1 md:grid-cols-2 rounded-3xl overflow-hidden border border-gray-800 shadow-2xl\"\r\n            >\r\n\r\n                {/* ------------------------------------------------ */}\r\n                {/* LEFT SIDE: THE OLD WAY (BANK)                   */}\r\n                {/* ------------------------------------------------ */}\r\n                <div className=\"bg-[#18181b] p-8 md:p-12 flex flex-col justify-between relative group\">\r\n                    <div className=\"absolute top-0 left-0 w-full h-1 bg-gray-700\"></div>\r\n\r\n                    <div className=\"space-y-6 z-10\">\r\n                        <div className=\"flex items-center gap-3 text-gray-500\">\r\n                            <div className=\"p-3 bg-gray-800/50 rounded-xl\">\r\n                                <Building2 size={24} />\r\n                            </div>\r\n                            <h3 className=\"font-bold text-lg tracking-wide uppercase\">Traditional Bank</h3>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-1\">\r\n                            <p className=\"text-sm text-gray-500 font-medium\">Your Deposit</p>\r\n                            <div className=\"text-5xl md:text-6xl font-black text-gray-600 tracking-tighter tabular-nums\">\r\n                                ${bankBalance.toFixed(4)}\r\n                            </div>\r\n                            <p className=\"text-xs text-gray-600 font-mono pt-2\">\r\n                                +${bankGain.toFixed(6)} earned\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-12\">\r\n                        <div className=\"flex items-center gap-2 text-gray-600 bg-gray-900/50 w-fit px-4 py-2 rounded-lg border border-gray-800\">\r\n                            <span className=\"w-2 h-2 rounded-full bg-gray-500\"></span>\r\n                            <span className=\"text-sm font-bold\">0.5% APY</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                {/* ------------------------------------------------ */}\r\n                {/* RIGHT SIDE: THE NEW WAY (STREAM SETTLE)         */}\r\n                {/* ------------------------------------------------ */}\r\n                <div className=\"bg-[#0f281e] p-8 md:p-12 flex flex-col justify-between relative overflow-hidden\">\r\n                    {/* Background Effects */}\r\n                    <div className=\"absolute top-0 right-0 w-[500px] h-[500px] bg-emerald-500/10 rounded-full blur-[100px] pointer-events-none\"></div>\r\n                    <div className=\"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-500 to-green-300\"></div>\r\n\r\n                    <div className=\"space-y-6 z-10\">\r\n                        <div className=\"flex items-center gap-3 text-emerald-400\">\r\n                            <div className=\"p-3 bg-emerald-500/10 rounded-xl shadow-[0_0_15px_rgba(16,185,129,0.2)]\">\r\n                                <Zap size={24} className=\"fill-emerald-500 text-emerald-500\" />\r\n                            </div>\r\n                            <h3 className=\"font-bold text-lg tracking-wide uppercase\">StreamSettle</h3>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-1\">\r\n                            <p className=\"text-sm text-emerald-500/70 font-medium\">High Yield Protocol</p>\r\n                            <div className=\"text-5xl md:text-6xl font-black text-white tracking-tighter tabular-nums drop-shadow-[0_0_15px_rgba(16,185,129,0.3)]\">\r\n                                ${streamBalance.toFixed(4)}\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 pt-2\">\r\n                                <p className=\"text-xs text-emerald-400 font-mono\">\r\n                                    +${streamGain.toFixed(6)} earned\r\n                                </p>\r\n                                <span className=\"text-[10px] bg-emerald-500/20 text-emerald-400 px-1.5 py-0.5 rounded font-bold\">\r\n                                    {diffMultiplier}x Faster\r\n                                </span>\r\n                            </div>\r\n                            {deliveryCount > 0 && (\r\n                                <p className=\"text-xs text-emerald-500/60 font-medium pt-2\">\r\n                                    Fueled by your {deliveryCount} deliveries\r\n                                </p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"mt-12 flex items-center justify-between\">\r\n                        <div className=\"flex items-center gap-2 text-white bg-emerald-950/50 w-fit px-4 py-2 rounded-lg border border-emerald-500/30 shadow-[0_4px_12px_rgba(0,0,0,0.2)]\">\r\n                            <span className=\"relative flex h-2 w-2\">\r\n                                <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\r\n                                <span className=\"relative inline-flex rounded-full h-2 w-2 bg-emerald-500\"></span>\r\n                            </span>\r\n                            <span className=\"text-sm font-bold\">8.0% - 12% APY</span>\r\n                        </div>\r\n\r\n                        <button className=\"group flex items-center gap-2 text-sm font-bold text-white hover:text-emerald-400 transition-colors\">\r\n                            Start Saving <ArrowRight size={16} className=\"group-hover:translate-x-1 transition-transform\" />\r\n                        </button>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </motion.div>\r\n\r\n            <p className=\"text-center text-gray-500 text-xs mt-6\">\r\n                *Simulated projection based on current DeFi yield rates vs national average savings rate.\r\n            </p>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 778, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/app/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport db from '@/lib/db';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { cookies } from 'next/headers';\r\n\r\n// --- Auth Actions ---\r\n\r\nexport async function signup(currentState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n    const name = formData.get('name') as string;\r\n\r\n    if (!email || !password || !name) {\r\n        return { success: false, message: 'All fields are required' };\r\n    }\r\n\r\n    try {\r\n        const stmt = db.prepare('INSERT INTO users (email, password, name) VALUES (?, ?, ?)');\r\n        const result = stmt.run(email, password, name);\r\n\r\n        // Simple cookie session\r\n        (await cookies()).set('user_id', result.lastInsertRowid.toString());\r\n        (await cookies()).set('user_name', name); // For easy access\r\n\r\n        return { success: true, message: 'Account created' };\r\n    } catch (error: any) {\r\n        if (error.code === 'SQLITE_CONSTRAINT_UNIQUE') {\r\n            return { success: false, message: 'Email already exists' };\r\n        }\r\n        return { success: false, message: error.message };\r\n    }\r\n}\r\n\r\nexport async function login(currentState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT * FROM users WHERE email = ? AND password = ?');\r\n        const user = stmt.get(email, password) as any;\r\n\r\n        if (!user) {\r\n            return { success: false, message: 'Invalid credentials' };\r\n        }\r\n\r\n        (await cookies()).set('user_id', user.id.toString());\r\n        (await cookies()).set('user_name', user.name);\r\n\r\n        return { success: true, message: 'Login successful', user };\r\n    } catch (error: any) {\r\n        return { success: false, message: error.message };\r\n    }\r\n}\r\n\r\nexport async function logoutAction() {\r\n    (await cookies()).delete('user_id');\r\n    (await cookies()).delete('user_name');\r\n    return { success: true };\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return null;\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT id, name, email FROM users WHERE id = ?');\r\n        const user = stmt.get(userId);\r\n        return user;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\n// --- Delivery Actions ---\r\n\r\n// --- Delivery Actions ---\r\n\r\nexport async function deductPension(amount: number, platform: string = 'Generic') {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: false, message: \"Not authenticated\" };\r\n\r\n    console.log(`Processing deduction for amount: $${amount} from ${platform} for user ${userId}`);\r\n    const pensionCut = amount * 0.01;\r\n\r\n    try {\r\n        const stmt = db.prepare('INSERT INTO deliveries (user_id, platform, amount, pension_cut) VALUES (?, ?, ?, ?)');\r\n        const result = stmt.run(userId, platform, amount, pensionCut);\r\n\r\n        revalidatePath('/dashboard');\r\n        revalidatePath('/pension');\r\n        return { success: true, data: { id: result.lastInsertRowid, amount, pensionCut } };\r\n    } catch (error: any) {\r\n        console.error(\"SQLite Error:\", error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getRecentDeliveries() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: [] }; // Return empty if not logged in\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT * FROM deliveries WHERE user_id = ? ORDER BY created_at DESC LIMIT 10');\r\n        const transactions = stmt.all(userId);\r\n        return { success: true, data: transactions };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n\r\n// --- User Profile Actions ---\r\n\r\nexport async function getUserProfile() {\r\n    // For MVP, user_profile is single row, but we should conceptually link it. \r\n    // Since table schema for user_profile wasn't changed to have user_id (it was a singleton mock), \r\n    // we will keep it as is for now, or assume row 1 is the current user. \r\n    // The prompt asked for \"Recent Activities\" specifically to be user logged.\r\n    try {\r\n        const user = db.prepare('SELECT * FROM user_profile LIMIT 1').get();\r\n        return { success: true, data: user };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateUserProfile(data: { name: string; email: string; retirement_goal: number; daily_delivery_goal: number, contribution_rate?: number }) {\r\n    try {\r\n        const stmt = db.prepare(`\r\n            UPDATE user_profile \r\n            SET name = ?, email = ?, retirement_goal = ?, daily_delivery_goal = ?, contribution_rate = ?\r\n            WHERE id = (SELECT id FROM user_profile LIMIT 1)\r\n        `);\r\n        stmt.run(data.name, data.email, data.retirement_goal, data.daily_delivery_goal, data.contribution_rate || 1.0);\r\n\r\n        revalidatePath('/profile');\r\n        revalidatePath('/dashboard');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// --- Manual Delivery Actions ---\r\n\r\nexport async function logDelivery(platform: string, amount: number) {\r\n    return deductPension(amount, platform);\r\n}\r\n\r\nexport async function getTodayStats() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: { count: 0, total_earnings: 0 } };\r\n\r\n    try {\r\n        const stmt = db.prepare(`\r\n            SELECT \r\n                COUNT(*) as count, \r\n                SUM(amount) as total_earnings \r\n            FROM deliveries \r\n            WHERE user_id = ? AND date(created_at) = date('now')\r\n        `);\r\n        const stats = stmt.get(userId) as { count: number, total_earnings: number };\r\n        return {\r\n            success: true,\r\n            data: {\r\n                count: stats.count || 0,\r\n                total_earnings: stats.total_earnings || 0\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getPensionBalance() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: 0 };\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT SUM(pension_cut) as total FROM deliveries WHERE user_id = ?');\r\n        const result = stmt.get(userId) as { total: number } | undefined;\r\n        return { success: true, data: result?.total || 0 };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getTotalDeliveries() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: 0 };\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT COUNT(*) as count FROM deliveries WHERE user_id = ?');\r\n        const result = stmt.get(userId) as { count: number } | undefined;\r\n        return { success: true, data: result?.count || 0 };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MA4LsB,yBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,uDAAA"}},
    {"offset": {"line": 795, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/app/yield/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Navbar from \"@/components/Navbar\";\r\nimport YieldBattle from \"@/components/YieldBattle\";\r\nimport { motion } from \"framer-motion\";\r\nimport { getPensionBalance, getTotalDeliveries } from \"@/app/actions\";\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\nexport default async function YieldPage() {\r\n    const balanceRes = await getPensionBalance();\r\n    const deliveriesRes = await getTotalDeliveries();\r\n\r\n    const balance = balanceRes.success ? balanceRes.data : 0;\r\n    const deliveryCount = deliveriesRes.success ? deliveriesRes.data : 0;\r\n\r\n    return (\r\n        <main className=\"min-h-screen bg-[#121212] selection:bg-emerald-500/30\">\r\n            <Navbar />\r\n\r\n            <div className=\"w-full max-w-[1400px] mx-auto px-6 py-12\">\r\n                {/* @ts-ignore */}\r\n                <motion.div\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    className=\"mb-12 text-center\"\r\n                >\r\n                    <h1 className=\"text-4xl md:text-5xl font-black text-white mb-4\">\r\n                        The Yield <span className=\"text-emerald-500\">Battle</span>\r\n                    </h1>\r\n                    <p className=\"text-gray-400 max-w-2xl mx-auto text-lg\">\r\n                        See exactly why your bank account is losing the fight against inflation,\r\n                        and how StreamSettle puts your money to work instantly.\r\n                    </p>\r\n                </motion.div>\r\n\r\n                <YieldBattle initialPrincipal={balance} deliveryCount={deliveryCount} />\r\n\r\n                <div className=\"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n                    {/* Educational / Hype Cards can go here in future */}\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AACA;AACA;AAAA;AALA;;;;;;AAOO,MAAM,UAAU;AAER,eAAe;IAC1B,MAAM,aAAa,MAAM,IAAA,0KAAiB;IAC1C,MAAM,gBAAgB,MAAM,IAAA,2KAAkB;IAE9C,MAAM,UAAU,WAAW,OAAO,GAAG,WAAW,IAAI,GAAG;IACvD,MAAM,gBAAgB,cAAc,OAAO,GAAG,cAAc,IAAI,GAAG;IAEnE,qBACI,6LAAC;QAAK,WAAU;;0BACZ,6LAAC,0IAAM;;;;;0BAEP,6LAAC;gBAAI,WAAU;;kCAEX,6LAAC,uMAAM,CAAC,GAAG;wBACP,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAG;wBAC7B,SAAS;4BAAE,SAAS;4BAAG,GAAG;wBAAE;wBAC5B,WAAU;;0CAEV,6LAAC;gCAAG,WAAU;;oCAAkD;kDAClD,6LAAC;wCAAK,WAAU;kDAAmB;;;;;;;;;;;;0CAEjD,6LAAC;gCAAE,WAAU;0CAA0C;;;;;;;;;;;;kCAM3D,6LAAC,+IAAW;wBAAC,kBAAkB;wBAAS,eAAe;;;;;;kCAEvD,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;AAM/B;KAnC8B"}}]
}