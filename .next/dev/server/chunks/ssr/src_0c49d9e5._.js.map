{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/app/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport db from '@/lib/db';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { cookies } from 'next/headers';\r\n\r\n// --- Auth Actions ---\r\n\r\nexport async function signup(currentState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n    const name = formData.get('name') as string;\r\n\r\n    if (!email || !password || !name) {\r\n        return { success: false, message: 'All fields are required' };\r\n    }\r\n\r\n    try {\r\n        const stmt = db.prepare('INSERT INTO users (email, password, name) VALUES (?, ?, ?)');\r\n        const result = stmt.run(email, password, name);\r\n\r\n        // Simple cookie session\r\n        (await cookies()).set('user_id', result.lastInsertRowid.toString());\r\n        (await cookies()).set('user_name', name); // For easy access\r\n\r\n        return { success: true, message: 'Account created' };\r\n    } catch (error: any) {\r\n        if (error.code === 'SQLITE_CONSTRAINT_UNIQUE') {\r\n            return { success: false, message: 'Email already exists' };\r\n        }\r\n        return { success: false, message: error.message };\r\n    }\r\n}\r\n\r\nexport async function login(currentState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT * FROM users WHERE email = ? AND password = ?');\r\n        const user = stmt.get(email, password) as any;\r\n\r\n        if (!user) {\r\n            return { success: false, message: 'Invalid credentials' };\r\n        }\r\n\r\n        (await cookies()).set('user_id', user.id.toString());\r\n        (await cookies()).set('user_name', user.name);\r\n\r\n        return { success: true, message: 'Login successful', user };\r\n    } catch (error: any) {\r\n        return { success: false, message: error.message };\r\n    }\r\n}\r\n\r\nexport async function logoutAction() {\r\n    (await cookies()).delete('user_id');\r\n    (await cookies()).delete('user_name');\r\n    return { success: true };\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return null;\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT id, name, email FROM users WHERE id = ?');\r\n        const user = stmt.get(userId);\r\n        return user;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\n// --- Delivery Actions ---\r\n\r\n// --- Delivery Actions ---\r\n\r\nexport async function deductPension(amount: number, platform: string = 'Generic') {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: false, message: \"Not authenticated\" };\r\n\r\n    console.log(`Processing deduction for amount: $${amount} from ${platform} for user ${userId}`);\r\n    const pensionCut = amount * 0.01;\r\n\r\n    try {\r\n        const stmt = db.prepare('INSERT INTO deliveries (user_id, platform, amount, pension_cut) VALUES (?, ?, ?, ?)');\r\n        const result = stmt.run(userId, platform, amount, pensionCut);\r\n\r\n        revalidatePath('/dashboard');\r\n        revalidatePath('/pension');\r\n        return { success: true, data: { id: result.lastInsertRowid, amount, pensionCut } };\r\n    } catch (error: any) {\r\n        console.error(\"SQLite Error:\", error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getRecentDeliveries() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: [] }; // Return empty if not logged in\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT * FROM deliveries WHERE user_id = ? ORDER BY created_at DESC LIMIT 10');\r\n        const transactions = stmt.all(userId);\r\n        return { success: true, data: transactions };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n\r\n// --- User Profile Actions ---\r\n\r\nexport async function getUserProfile() {\r\n    // For MVP, user_profile is single row, but we should conceptually link it. \r\n    // Since table schema for user_profile wasn't changed to have user_id (it was a singleton mock), \r\n    // we will keep it as is for now, or assume row 1 is the current user. \r\n    // The prompt asked for \"Recent Activities\" specifically to be user logged.\r\n    try {\r\n        const user = db.prepare('SELECT * FROM user_profile LIMIT 1').get();\r\n        return { success: true, data: user };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateUserProfile(data: { name: string; email: string; retirement_goal: number; daily_delivery_goal: number, contribution_rate?: number }) {\r\n    try {\r\n        const stmt = db.prepare(`\r\n            UPDATE user_profile \r\n            SET name = ?, email = ?, retirement_goal = ?, daily_delivery_goal = ?, contribution_rate = ?\r\n            WHERE id = (SELECT id FROM user_profile LIMIT 1)\r\n        `);\r\n        stmt.run(data.name, data.email, data.retirement_goal, data.daily_delivery_goal, data.contribution_rate || 1.0);\r\n\r\n        revalidatePath('/profile');\r\n        revalidatePath('/dashboard');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// --- Manual Delivery Actions ---\r\n\r\nexport async function logDelivery(platform: string, amount: number) {\r\n    return deductPension(amount, platform);\r\n}\r\n\r\nexport async function getTodayStats() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: { count: 0, total_earnings: 0 } };\r\n\r\n    try {\r\n        const stmt = db.prepare(`\r\n            SELECT \r\n                COUNT(*) as count, \r\n                SUM(amount) as total_earnings \r\n            FROM deliveries \r\n            WHERE user_id = ? AND date(created_at) = date('now')\r\n        `);\r\n        const stats = stmt.get(userId) as { count: number, total_earnings: number };\r\n        return {\r\n            success: true,\r\n            data: {\r\n                count: stats.count || 0,\r\n                total_earnings: stats.total_earnings || 0\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getPensionBalance() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: 0 };\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT SUM(pension_cut) as total FROM deliveries WHERE user_id = ?');\r\n        const result = stmt.get(userId) as { total: number } | undefined;\r\n        return { success: true, data: result?.total || 0 };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getTotalDeliveries() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: 0 };\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT COUNT(*) as count FROM deliveries WHERE user_id = ?');\r\n        const result = stmt.get(userId) as { count: number } | undefined;\r\n        return { success: true, data: result?.count || 0 };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MA+KsB,yBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,sDAAA"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/components/PensionTicker.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { getPensionBalance } from \"@/app/actions\";\r\nimport { TrendingUp, Loader2 } from \"lucide-react\";\r\n\r\nexport default function PensionTicker() {\r\n    const [balance, setBalance] = useState<number | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchBalance = async () => {\r\n            const res = await getPensionBalance();\r\n            if (res.success) {\r\n                setBalance(res.data as number);\r\n            }\r\n        };\r\n        fetchBalance();\r\n\r\n        // Optional: Poll every few seconds to keep it \"live\" if user logs delivery in another tab\r\n        const interval = setInterval(fetchBalance, 10000);\r\n        return () => clearInterval(interval);\r\n    }, []);\r\n\r\n    if (balance === null) return <div className=\"w-20 h-8 animate-pulse bg-gray-800 rounded-lg\"></div>;\r\n\r\n    return (\r\n        <div className=\"hidden md:flex items-center gap-2 bg-[#18181b] border border-gray-800 rounded-full px-3 py-1.5 text-sm font-bold shadow-sm\">\r\n            <div className=\"w-5 h-5 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-500\">\r\n                <TrendingUp size={12} />\r\n            </div>\r\n            <span className=\"text-emerald-400 font-mono\">\r\n                ${balance.toFixed(2)}\r\n            </span>\r\n            <span className=\"text-gray-600 text-xs font-medium\">Pension</span>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACpB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAgB;IAEtD,IAAA,kNAAS,EAAC;QACN,MAAM,eAAe;YACjB,MAAM,MAAM,MAAM,IAAA,uKAAiB;YACnC,IAAI,IAAI,OAAO,EAAE;gBACb,WAAW,IAAI,IAAI;YACvB;QACJ;QACA;QAEA,0FAA0F;QAC1F,MAAM,WAAW,YAAY,cAAc;QAC3C,OAAO,IAAM,cAAc;IAC/B,GAAG,EAAE;IAEL,IAAI,YAAY,MAAM,qBAAO,8OAAC;QAAI,WAAU;;;;;;IAE5C,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC,gOAAU;oBAAC,MAAM;;;;;;;;;;;0BAEtB,8OAAC;gBAAK,WAAU;;oBAA6B;oBACvC,QAAQ,OAAO,CAAC;;;;;;;0BAEtB,8OAAC;gBAAK,WAAU;0BAAoC;;;;;;;;;;;;AAGhE"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/components/Navbar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Wallet, LogOut, Verified } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport PensionTicker from \"./PensionTicker\";\r\n\r\nexport default function Navbar() {\r\n    const { user, logout } = useAuth();\r\n    // @ts-ignore\r\n    const userInitial = user?.name ? user.name[0] : \"U\";\r\n\r\n    return (\r\n        <nav className=\"sticky top-0 z-50 flex items-center justify-between p-6 border-b border-gray-800/50 bg-[#121212]/80 backdrop-blur-xl\">\r\n            <div className=\"flex items-center gap-2\">\r\n                <div className=\"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center shadow-[0_0_15px_rgba(16,185,129,0.3)]\">\r\n                    <span className=\"font-bold text-black text-xs\">GS</span>\r\n                </div>\r\n                <span className=\"font-bold text-xl tracking-tight text-white\">GigStream</span>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4\">\r\n                {user ? (\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"hidden md:flex items-center gap-1 bg-[#18181b] px-2 py-1.5 rounded-full border border-gray-800/50\">\r\n                            <NavLink href=\"/dashboard\" label=\"Home\" />\r\n                            <div className=\"w-px h-4 bg-gray-800 mx-2\"></div>\r\n                            <NavLink href=\"/yield\" label=\"Yield\" />\r\n                            <NavLink href=\"/pension\" label=\"Pension\" />\r\n                        </div>\r\n\r\n                        <div className=\"hidden lg:block ml-2\">\r\n                            <PensionTicker />\r\n                        </div>\r\n\r\n                        <div className=\"h-6 w-px bg-gray-800 hidden md:block\"></div>\r\n\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <a href=\"/profile\" className=\"flex items-center gap-3 group\">\r\n                                <span className=\"text-sm font-bold text-gray-400 group-hover:text-white transition-colors text-right hidden sm:block\">\r\n                                    {user.name}\r\n                                </span>\r\n                                <div className=\"w-9 h-9 bg-gradient-to-tr from-emerald-500 to-teal-400 rounded-full border-2 border-[#121212] flex items-center justify-center text-xs font-bold text-black ring-2 ring-emerald-500/20 group-hover:ring-emerald-500/50 transition-all\">\r\n                                    {user.name.charAt(0).toUpperCase()}\r\n                                </div>\r\n                            </a>\r\n                            <button onClick={logout} className=\"p-2 text-gray-500 hover:text-red-400 transition-colors rounded-full hover:bg-white/5\">\r\n                                <LogOut size={18} />\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <button className=\"flex items-center gap-2 bg-emerald-500/10 text-emerald-500 px-5 py-2.5 rounded-2xl hover:bg-emerald-500/20 transition-all font-semibold text-sm border border-emerald-500/20 hover:shadow-[0_0_20px_rgba(16,185,129,0.2)]\">\r\n                        <Wallet size={18} />\r\n                        Connect Wallet\r\n                    </button>\r\n                )}\r\n            </div>\r\n        </nav>\r\n    );\r\n}\r\n\r\nfunction NavLink({ href, label }: { href: string; label: string }) {\r\n    return (\r\n        <a href={href} className=\"text-sm font-bold text-gray-400 hover:text-white transition-colors relative group\">\r\n            {label}\r\n            <span className=\"absolute -bottom-1 left-0 w-0 h-0.5 bg-emerald-500 transition-all group-hover:w-full\"></span>\r\n        </a>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAEA;AACA;AALA;;;;;AAOe,SAAS;IACpB,MAAM,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,IAAA,yIAAO;IAChC,aAAa;IACb,MAAM,cAAc,MAAM,OAAO,KAAK,IAAI,CAAC,EAAE,GAAG;IAEhD,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC;4BAAK,WAAU;sCAA+B;;;;;;;;;;;kCAEnD,8OAAC;wBAAK,WAAU;kCAA8C;;;;;;;;;;;;0BAGlE,8OAAC;gBAAI,WAAU;0BACV,qBACG,8OAAC;oBAAI,WAAU;;sCACX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAQ,MAAK;oCAAa,OAAM;;;;;;8CACjC,8OAAC;oCAAI,WAAU;;;;;;8CACf,8OAAC;oCAAQ,MAAK;oCAAS,OAAM;;;;;;8CAC7B,8OAAC;oCAAQ,MAAK;oCAAW,OAAM;;;;;;;;;;;;sCAGnC,8OAAC;4BAAI,WAAU;sCACX,cAAA,8OAAC,8IAAa;;;;;;;;;;sCAGlB,8OAAC;4BAAI,WAAU;;;;;;sCAEf,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAE,MAAK;oCAAW,WAAU;;sDACzB,8OAAC;4CAAK,WAAU;sDACX,KAAK,IAAI;;;;;;sDAEd,8OAAC;4CAAI,WAAU;sDACV,KAAK,IAAI,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;;;;;;;8CAGxC,8OAAC;oCAAO,SAAS;oCAAQ,WAAU;8CAC/B,cAAA,8OAAC,oNAAM;wCAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;yCAK1B,8OAAC;oBAAO,WAAU;;sCACd,8OAAC,gNAAM;4BAAC,MAAM;;;;;;wBAAM;;;;;;;;;;;;;;;;;;AAO5C;AAEA,SAAS,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAmC;IAC7D,qBACI,8OAAC;QAAE,MAAM;QAAM,WAAU;;YACpB;0BACD,8OAAC;gBAAK,WAAU;;;;;;;;;;;;AAG5B"}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/components/PensionHero.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { useTransactions } from \"@/context/TransactionContext\"; // Import context\r\nimport { Coins, Plus } from \"lucide-react\";\r\n\r\ninterface PensionHeroProps {\r\n    dailyDeliveries: number;\r\n    currentBalance: number;\r\n    isStreaming: boolean;\r\n}\r\n\r\nexport default function PensionHero({ dailyDeliveries, currentBalance, isStreaming }: PensionHeroProps) {\r\n    const { addTransaction } = useTransactions();\r\n    const [showCoin, setShowCoin] = useState(false);\r\n\r\n    // Financial Health Calculations\r\n    const dailyCostOfLiving = 85;\r\n    const daysFunded = currentBalance / dailyCostOfLiving;\r\n    const yearOneGoal = 500;\r\n    const progressPercent = Math.min((currentBalance / yearOneGoal) * 100, 100);\r\n\r\n    // Dynamic Health Score\r\n    const getHealthScore = () => {\r\n        if (dailyDeliveries > 20) return { label: \"Excellent\", color: \"text-emerald-500\" };\r\n        if (dailyDeliveries > 10) return { label: \"Good\", color: \"text-blue-400\" };\r\n        return { label: \"Fair\", color: \"text-yellow-400\" };\r\n    }\r\n    const health = getHealthScore();\r\n\r\n    // Handler to simulate a delivery and trigger animation\r\n    const handleSimulateDelivery = () => {\r\n        // 1. Trigger Animation\r\n        setShowCoin(true);\r\n        setTimeout(() => setShowCoin(false), 1000); // Reset after 1s\r\n\r\n        // 2. Add Transaction (Mock)\r\n        addTransaction({\r\n            type: 'earning',\r\n            amount: 15.00,\r\n            description: 'Instant Gig Payment'\r\n        });\r\n\r\n        // Note: Real balance update would happen via context/stream, \r\n        // but for now the visuals are decoupled slightly for the animation.\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center py-10 md:py-16 text-center space-y-8 w-full max-w-4xl mx-auto px-6 relative\">\r\n\r\n            {/* ------------------------------------------------ */}\r\n            {/* FLYING COIN ANIMATION LAYER                      */}\r\n            {/* ------------------------------------------------ */}\r\n            <AnimatePresence>\r\n                {showCoin && (\r\n                    <motion.div\r\n                        initial={{ opacity: 0, y: 100, scale: 0.5 }}\r\n                        animate={{ opacity: 1, y: -50, scale: 1.2 }}\r\n                        exit={{ opacity: 0, y: -100 }}\r\n                        transition={{ duration: 0.8, ease: \"easeOut\" }}\r\n                        className=\"absolute z-50 pointer-events-none text-yellow-400 flex items-center justify-center\"\r\n                        style={{ left: '50%', top: '40%' }}\r\n                    >\r\n                        <Coins size={48} className=\"drop-shadow-[0_0_15px_rgba(250,204,21,0.6)]\" />\r\n                        <span className=\"absolute top-0 -right-8 text-white font-bold text-lg\">+$0.15</span>\r\n                    </motion.div>\r\n                )}\r\n            </AnimatePresence>\r\n\r\n\r\n            {/* Streaming Pill */}\r\n            <motion.div\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"flex items-center gap-2 text-emerald-400 text-xs font-bold uppercase tracking-widest bg-emerald-500/5 px-4 py-1.5 rounded-full border border-emerald-500/10\"\r\n            >\r\n                <div className=\"relative flex h-2 w-2\">\r\n                    {isStreaming && (\r\n                        <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\r\n                    )}\r\n                    <span className={`relative inline-flex rounded-full h-2 w-2 ${isStreaming ? 'bg-emerald-500' : 'bg-gray-500'}`}></span>\r\n                </div>\r\n                {isStreaming ? \"System Active\" : \"Stream Paused\"}\r\n            </motion.div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 w-full\">\r\n\r\n                {/* Metric Card 1: Balance & Score */}\r\n                <div className=\"bg-[#18181b] border border-gray-800 rounded-3xl p-8 flex flex-col items-center justify-center relative overflow-hidden group\">\r\n                    {/* Coin Bucket Target Area */}\r\n                    <div className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\r\n                        <Coins size={100} className=\"text-emerald-500\" />\r\n                    </div>\r\n\r\n                    <h2 className=\"text-gray-400 font-medium text-sm mb-2\">Pension Balance</h2>\r\n                    <div className=\"flex items-baseline gap-1 mb-4\">\r\n                        <span className=\"text-5xl md:text-6xl font-black text-white tracking-tighter tabular-nums\">\r\n                            {currentBalance.toFixed(5)}\r\n                        </span>\r\n                        <span className=\"text-xl font-bold text-gray-500\">USDC</span>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-2 text-sm text-gray-500 bg-gray-900/50 px-3 py-1.5 rounded-lg border border-gray-800\">\r\n                        <span>Financial Health:</span>\r\n                        <span className={`${health.color} font-bold`}>{health.label}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Metric Card 2: Days Funded & Milestones */}\r\n                <div className=\"bg-[#18181b] border border-gray-800 rounded-3xl p-8 flex flex-col justify-between text-left relative overflow-hidden\">\r\n\r\n                    <div className=\"mb-6\">\r\n                        <h3 className=\"text-gray-400 font-medium text-sm mb-1\">Retirement Freedom</h3>\r\n                        <div className=\"flex items-baseline gap-2\">\r\n                            <span className=\"text-4xl font-bold text-white tabular-nums\">{daysFunded.toFixed(6)}</span>\r\n                            <span className=\"text-emerald-500 font-medium\">Days Funded</span>\r\n                        </div>\r\n                        <p className=\"text-xs text-gray-600 mt-1\">Based on ${dailyCostOfLiving}/day cost of living.</p>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <div className=\"flex justify-between items-end mb-2\">\r\n                            <span className=\"text-xs font-bold text-emerald-500 uppercase tracking-wider\">Year 1 Goal</span>\r\n                            <span className=\"text-xs text-white font-bold\">{progressPercent.toFixed(1)}%</span>\r\n                        </div>\r\n                        <div className=\"h-2 w-full bg-gray-800 rounded-full overflow-hidden\">\r\n                            <motion.div\r\n                                initial={{ width: 0 }}\r\n                                animate={{ width: `${progressPercent}%` }}\r\n                                transition={{ duration: 1.5, ease: \"easeOut\" }}\r\n                                className=\"h-full bg-emerald-500\"\r\n                            />\r\n                        </div>\r\n                        {/* Added Simulate Button for Reviewers/Testing */}\r\n                        <div className=\"flex justify-between items-center mt-3\">\r\n                            <p className=\"text-[10px] text-gray-600\">${currentBalance.toFixed(0)} / ${yearOneGoal}</p>\r\n                            <button\r\n                                onClick={handleSimulateDelivery}\r\n                                className=\"flex items-center gap-1 text-[10px] bg-white/5 hover:bg-white/10 px-2 py-1 rounded border border-gray-700 text-gray-300 transition-colors\"\r\n                            >\r\n                                <Plus size={10} /> Simulate Gig\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <motion.p\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                transition={{ delay: 0.5 }}\r\n                className=\"text-gray-500 max-w-md text-sm\"\r\n            >\r\n                <span className=\"text-gray-300 decoration-emerald-500 underline decoration-1 underline-offset-4\">{dailyDeliveries} deliveries</span> completed today. Your consistent activity is compounding daily.\r\n            </motion.p>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/app/actions.ts"],"sourcesContent":["'use server';\r\n\r\nimport db from '@/lib/db';\r\nimport { revalidatePath } from 'next/cache';\r\nimport { cookies } from 'next/headers';\r\n\r\n// --- Auth Actions ---\r\n\r\nexport async function signup(currentState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n    const name = formData.get('name') as string;\r\n\r\n    if (!email || !password || !name) {\r\n        return { success: false, message: 'All fields are required' };\r\n    }\r\n\r\n    try {\r\n        const stmt = db.prepare('INSERT INTO users (email, password, name) VALUES (?, ?, ?)');\r\n        const result = stmt.run(email, password, name);\r\n\r\n        // Simple cookie session\r\n        (await cookies()).set('user_id', result.lastInsertRowid.toString());\r\n        (await cookies()).set('user_name', name); // For easy access\r\n\r\n        return { success: true, message: 'Account created' };\r\n    } catch (error: any) {\r\n        if (error.code === 'SQLITE_CONSTRAINT_UNIQUE') {\r\n            return { success: false, message: 'Email already exists' };\r\n        }\r\n        return { success: false, message: error.message };\r\n    }\r\n}\r\n\r\nexport async function login(currentState: any, formData: FormData) {\r\n    const email = formData.get('email') as string;\r\n    const password = formData.get('password') as string;\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT * FROM users WHERE email = ? AND password = ?');\r\n        const user = stmt.get(email, password) as any;\r\n\r\n        if (!user) {\r\n            return { success: false, message: 'Invalid credentials' };\r\n        }\r\n\r\n        (await cookies()).set('user_id', user.id.toString());\r\n        (await cookies()).set('user_name', user.name);\r\n\r\n        return { success: true, message: 'Login successful', user };\r\n    } catch (error: any) {\r\n        return { success: false, message: error.message };\r\n    }\r\n}\r\n\r\nexport async function logoutAction() {\r\n    (await cookies()).delete('user_id');\r\n    (await cookies()).delete('user_name');\r\n    return { success: true };\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return null;\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT id, name, email FROM users WHERE id = ?');\r\n        const user = stmt.get(userId);\r\n        return user;\r\n    } catch (error) {\r\n        return null;\r\n    }\r\n}\r\n\r\n// --- Delivery Actions ---\r\n\r\n// --- Delivery Actions ---\r\n\r\nexport async function deductPension(amount: number, platform: string = 'Generic') {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: false, message: \"Not authenticated\" };\r\n\r\n    console.log(`Processing deduction for amount: $${amount} from ${platform} for user ${userId}`);\r\n    const pensionCut = amount * 0.01;\r\n\r\n    try {\r\n        const stmt = db.prepare('INSERT INTO deliveries (user_id, platform, amount, pension_cut) VALUES (?, ?, ?, ?)');\r\n        const result = stmt.run(userId, platform, amount, pensionCut);\r\n\r\n        revalidatePath('/dashboard');\r\n        revalidatePath('/pension');\r\n        return { success: true, data: { id: result.lastInsertRowid, amount, pensionCut } };\r\n    } catch (error: any) {\r\n        console.error(\"SQLite Error:\", error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getRecentDeliveries() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: [] }; // Return empty if not logged in\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT * FROM deliveries WHERE user_id = ? ORDER BY created_at DESC LIMIT 10');\r\n        const transactions = stmt.all(userId);\r\n        return { success: true, data: transactions };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n\r\n// --- User Profile Actions ---\r\n\r\nexport async function getUserProfile() {\r\n    // For MVP, user_profile is single row, but we should conceptually link it. \r\n    // Since table schema for user_profile wasn't changed to have user_id (it was a singleton mock), \r\n    // we will keep it as is for now, or assume row 1 is the current user. \r\n    // The prompt asked for \"Recent Activities\" specifically to be user logged.\r\n    try {\r\n        const user = db.prepare('SELECT * FROM user_profile LIMIT 1').get();\r\n        return { success: true, data: user };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function updateUserProfile(data: { name: string; email: string; retirement_goal: number; daily_delivery_goal: number, contribution_rate?: number }) {\r\n    try {\r\n        const stmt = db.prepare(`\r\n            UPDATE user_profile \r\n            SET name = ?, email = ?, retirement_goal = ?, daily_delivery_goal = ?, contribution_rate = ?\r\n            WHERE id = (SELECT id FROM user_profile LIMIT 1)\r\n        `);\r\n        stmt.run(data.name, data.email, data.retirement_goal, data.daily_delivery_goal, data.contribution_rate || 1.0);\r\n\r\n        revalidatePath('/profile');\r\n        revalidatePath('/dashboard');\r\n        return { success: true };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n// --- Manual Delivery Actions ---\r\n\r\nexport async function logDelivery(platform: string, amount: number) {\r\n    return deductPension(amount, platform);\r\n}\r\n\r\nexport async function getTodayStats() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: { count: 0, total_earnings: 0 } };\r\n\r\n    try {\r\n        const stmt = db.prepare(`\r\n            SELECT \r\n                COUNT(*) as count, \r\n                SUM(amount) as total_earnings \r\n            FROM deliveries \r\n            WHERE user_id = ? AND date(created_at) = date('now')\r\n        `);\r\n        const stats = stmt.get(userId) as { count: number, total_earnings: number };\r\n        return {\r\n            success: true,\r\n            data: {\r\n                count: stats.count || 0,\r\n                total_earnings: stats.total_earnings || 0\r\n            }\r\n        };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getPensionBalance() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: 0 };\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT SUM(pension_cut) as total FROM deliveries WHERE user_id = ?');\r\n        const result = stmt.get(userId) as { total: number } | undefined;\r\n        return { success: true, data: result?.total || 0 };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\nexport async function getTotalDeliveries() {\r\n    const userId = (await cookies()).get('user_id')?.value;\r\n    if (!userId) return { success: true, data: 0 };\r\n\r\n    try {\r\n        const stmt = db.prepare('SELECT COUNT(*) as count FROM deliveries WHERE user_id = ?');\r\n        const result = stmt.get(userId) as { count: number } | undefined;\r\n        return { success: true, data: result?.count || 0 };\r\n    } catch (error: any) {\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAkGsB,wBAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA,uDAAA"}},
    {"offset": {"line": 784, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/components/RecentDeliveries.tsx"],"sourcesContent":["import { motion } from \"framer-motion\";\r\nimport { ArrowUpRight, ArrowDownLeft } from \"lucide-react\";\r\nimport { getRecentDeliveries } from \"@/app/actions\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\n// Define locally since we're decoupling from context for read\r\ntype Transaction = {\r\n    id: number;\r\n    user_id: number;\r\n    platform: string;\r\n    amount: number;\r\n    pension_cut: number;\r\n    created_at: string;\r\n    // Mapped for display\r\n    type: 'earning' | 'pension_stream';\r\n    description: string;\r\n    timestamp: Date;\r\n};\r\n\r\nexport default function RecentDeliveries() {\r\n    const [transactions, setTransactions] = useState<Transaction[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchTx = async () => {\r\n            const res = await getRecentDeliveries();\r\n            // @ts-ignore\r\n            if (res.success && res.data) {\r\n                // Map DB shape to UI shape\r\n                // @ts-ignore\r\n                const mapped = res.data.map((tx: any) => ({\r\n                    ...tx,\r\n                    type: 'earning', // All logged deliveries are earnings\r\n                    description: `${tx.platform} Delivery`,\r\n                    timestamp: new Date(tx.created_at)\r\n                }));\r\n                setTransactions(mapped);\r\n            }\r\n            setLoading(false);\r\n        };\r\n        fetchTx();\r\n    }, []);\r\n\r\n    if (loading) return <div className=\"p-8 text-center text-gray-500\">Loading activity...</div>;\r\n\r\n    return (\r\n        <div className=\"w-full bg-[#18181b] border border-gray-800 rounded-3xl p-8 relative overflow-hidden\">\r\n            <h3 className=\"text-xl font-bold text-white mb-6\">Recent Activity</h3>\r\n\r\n            <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-left border-collapse\">\r\n                    <thead>\r\n                        <tr className=\"text-gray-500 text-xs uppercase tracking-wider border-b border-gray-800\">\r\n                            <th className=\"pb-3 pl-4\">Type</th>\r\n                            <th className=\"pb-3\">Description</th>\r\n                            <th className=\"pb-3\">Amount</th>\r\n                            <th className=\"pb-3 text-right pr-4\">Time</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"text-sm\">\r\n                        {transactions.length === 0 ? (\r\n                            <tr>\r\n                                <td colSpan={4} className=\"py-8 text-center text-gray-500\">\r\n                                    No recent activity. Log a delivery to see it here!\r\n                                </td>\r\n                            </tr>\r\n                        ) : (\r\n                            transactions.map((tx) => (\r\n                                <motion.tr\r\n                                    key={tx.id}\r\n                                    initial={{ opacity: 0, y: 10 }}\r\n                                    animate={{ opacity: 1, y: 0 }}\r\n                                    className=\"group hover:bg-white/5 transition-colors border-b border-gray-800/50 last:border-0\"\r\n                                >\r\n                                    <td className=\"py-4 pl-4\">\r\n                                        <div className={`p-2 rounded-lg w-fit ${tx.type === 'earning' ? 'bg-emerald-500/10 text-emerald-500' : 'bg-blue-500/10 text-blue-500'}`}>\r\n                                            {tx.type === 'earning' ? <ArrowDownLeft size={16} /> : <ArrowUpRight size={16} />}\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"py-4 font-medium text-gray-300\">\r\n                                        {tx.description}\r\n                                    </td>\r\n                                    <td className=\"py-4 font-bold text-white\">\r\n                                        ${tx.amount.toFixed(2)}\r\n                                    </td>\r\n                                    <td className=\"py-4 text-right pr-4 text-gray-500\">\r\n                                        {tx.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                    </td>\r\n                                </motion.tr>\r\n                            ))\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;AAgBe,SAAS;IACpB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IAClE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN,MAAM,UAAU;YACZ,MAAM,MAAM,MAAM,IAAA,yKAAmB;YACrC,aAAa;YACb,IAAI,IAAI,OAAO,IAAI,IAAI,IAAI,EAAE;gBACzB,2BAA2B;gBAC3B,aAAa;gBACb,MAAM,SAAS,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,KAAY,CAAC;wBACtC,GAAG,EAAE;wBACL,MAAM;wBACN,aAAa,GAAG,GAAG,QAAQ,CAAC,SAAS,CAAC;wBACtC,WAAW,IAAI,KAAK,GAAG,UAAU;oBACrC,CAAC;gBACD,gBAAgB;YACpB;YACA,WAAW;QACf;QACA;IACJ,GAAG,EAAE;IAEL,IAAI,SAAS,qBAAO,8OAAC;QAAI,WAAU;kBAAgC;;;;;;IAEnE,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAElD,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAM,WAAU;;sCACb,8OAAC;sCACG,cAAA,8OAAC;gCAAG,WAAU;;kDACV,8OAAC;wCAAG,WAAU;kDAAY;;;;;;kDAC1B,8OAAC;wCAAG,WAAU;kDAAO;;;;;;kDACrB,8OAAC;wCAAG,WAAU;kDAAO;;;;;;kDACrB,8OAAC;wCAAG,WAAU;kDAAuB;;;;;;;;;;;;;;;;;sCAG7C,8OAAC;4BAAM,WAAU;sCACZ,aAAa,MAAM,KAAK,kBACrB,8OAAC;0CACG,cAAA,8OAAC;oCAAG,SAAS;oCAAG,WAAU;8CAAiC;;;;;;;;;;uCAK/D,aAAa,GAAG,CAAC,CAAC,mBACd,8OAAC,oMAAM,CAAC,EAAE;oCAEN,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAG;oCAC7B,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAE;oCAC5B,WAAU;;sDAEV,8OAAC;4CAAG,WAAU;sDACV,cAAA,8OAAC;gDAAI,WAAW,CAAC,qBAAqB,EAAE,GAAG,IAAI,KAAK,YAAY,uCAAuC,gCAAgC;0DAClI,GAAG,IAAI,KAAK,0BAAY,8OAAC,6OAAa;oDAAC,MAAM;;;;;yEAAS,8OAAC,0OAAY;oDAAC,MAAM;;;;;;;;;;;;;;;;sDAGnF,8OAAC;4CAAG,WAAU;sDACT,GAAG,WAAW;;;;;;sDAEnB,8OAAC;4CAAG,WAAU;;gDAA4B;gDACpC,GAAG,MAAM,CAAC,OAAO,CAAC;;;;;;;sDAExB,8OAAC;4CAAG,WAAU;sDACT,GAAG,SAAS,CAAC,kBAAkB,CAAC,EAAE,EAAE;gDAAE,MAAM;gDAAW,QAAQ;4CAAU;;;;;;;mCAjBzE,GAAG,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2B9C"}},
    {"offset": {"line": 1009, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/hooks/usePensionStream.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nexport function usePensionStream(dailyDeliveries: number = 12) {\r\n    // Dummy data as requested\r\n    const [currentBalance, setCurrentBalance] = useState(124.50);\r\n    const [isStreaming, setIsStreaming] = useState(true);\r\n\r\n    // Simulation effect to keep the \"live\" feel in the UI\r\n    useEffect(() => {\r\n        let interval: NodeJS.Timeout;\r\n        if (isStreaming) {\r\n            // Speed = Base * Deliveries Multiplier\r\n            const baseIncrement = 0.00005; // 10x speed boost for demo visibility\r\n            const activitySpeed = Math.max(1, dailyDeliveries / 3); // Faster response\r\n            const tickAmount = baseIncrement * activitySpeed;\r\n\r\n            interval = setInterval(() => {\r\n                setCurrentBalance((prev) => prev + tickAmount);\r\n            }, 16);\r\n        }\r\n        return () => clearInterval(interval);\r\n    }, [isStreaming, dailyDeliveries]);\r\n\r\n    const startGlobalStream = () => {\r\n        console.log(\"Transaction Initiated\");\r\n        setIsStreaming(true);\r\n    };\r\n\r\n    const stopGlobalStream = () => {\r\n        console.log(\"Transaction Stopped\");\r\n        setIsStreaming(false);\r\n    }\r\n\r\n    return {\r\n        currentBalance,\r\n        isStreaming,\r\n        startGlobalStream,\r\n        stopGlobalStream\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIO,SAAS,iBAAiB,kBAA0B,EAAE;IACzD,0BAA0B;IAC1B,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAE/C,sDAAsD;IACtD,IAAA,kNAAS,EAAC;QACN,IAAI;QACJ,IAAI,aAAa;YACb,uCAAuC;YACvC,MAAM,gBAAgB,SAAS,sCAAsC;YACrE,MAAM,gBAAgB,KAAK,GAAG,CAAC,GAAG,kBAAkB,IAAI,kBAAkB;YAC1E,MAAM,aAAa,gBAAgB;YAEnC,WAAW,YAAY;gBACnB,kBAAkB,CAAC,OAAS,OAAO;YACvC,GAAG;QACP;QACA,OAAO,IAAM,cAAc;IAC/B,GAAG;QAAC;QAAa;KAAgB;IAEjC,MAAM,oBAAoB;QACtB,QAAQ,GAAG,CAAC;QACZ,eAAe;IACnB;IAEA,MAAM,mBAAmB;QACrB,QAAQ,GAAG,CAAC;QACZ,eAAe;IACnB;IAEA,OAAO;QACH;QACA;QACA;QACA;IACJ;AACJ"}},
    {"offset": {"line": 1056, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/sreer/OneDrive/Documents/VSCODE/GigStream/src/components/PensionPageClient.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Navbar from \"@/components/Navbar\";\r\nimport PensionHero from \"@/components/PensionHero\";\r\nimport RecentDeliveries from \"@/components/RecentDeliveries\";\r\nimport { usePensionStream } from \"@/hooks/usePensionStream\";\r\n\r\nexport default function PensionPageClient({ initialDailyDeliveries }: { initialDailyDeliveries: number }) {\r\n    const { currentBalance, isStreaming } = usePensionStream(initialDailyDeliveries);\r\n\r\n    return (\r\n        <main className=\"min-h-screen bg-[#121212] selection:bg-emerald-500/30\">\r\n            <Navbar />\r\n\r\n            <div className=\"w-full max-w-[1400px] mx-auto px-6 py-12\">\r\n                <div className=\"flex flex-col lg:flex-row gap-8\">\r\n\r\n                    <div className=\"flex-1\">\r\n                        <PensionHero\r\n                            dailyDeliveries={initialDailyDeliveries}\r\n                            currentBalance={currentBalance}\r\n                            isStreaming={isStreaming}\r\n                        />\r\n\r\n                        <div className=\"mt-8\">\r\n                            <RecentDeliveries />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sidebar / Extra Info */}\r\n                    <aside className=\"w-full lg:w-80 space-y-6\">\r\n                        <div className=\"bg-[#18181b] border border-gray-800 rounded-2xl p-6\">\r\n                            <h3 className=\"font-bold text-white mb-3\">How it works</h3>\r\n                            <p className=\"text-sm text-gray-400 mb-4\">\r\n                                Every time you complete a gig, a micro-transaction (1%) is streamed instantly into a DeFi yield pool.\r\n                            </p>\r\n                            <div className=\"bg-emerald-500/10 text-emerald-500 text-xs font-bold px-3 py-2 rounded-lg inline-block\">\r\n                                Powered by Superfluid\r\n                            </div>\r\n                        </div>\r\n                    </aside>\r\n\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,kBAAkB,EAAE,sBAAsB,EAAsC;IACpG,MAAM,EAAE,cAAc,EAAE,WAAW,EAAE,GAAG,IAAA,oJAAgB,EAAC;IAEzD,qBACI,8OAAC;QAAK,WAAU;;0BACZ,8OAAC,uIAAM;;;;;0BAEP,8OAAC;gBAAI,WAAU;0BACX,cAAA,8OAAC;oBAAI,WAAU;;sCAEX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC,4IAAW;oCACR,iBAAiB;oCACjB,gBAAgB;oCAChB,aAAa;;;;;;8CAGjB,8OAAC;oCAAI,WAAU;8CACX,cAAA,8OAAC,iJAAgB;;;;;;;;;;;;;;;;sCAKzB,8OAAC;4BAAM,WAAU;sCACb,cAAA,8OAAC;gCAAI,WAAU;;kDACX,8OAAC;wCAAG,WAAU;kDAA4B;;;;;;kDAC1C,8OAAC;wCAAE,WAAU;kDAA6B;;;;;;kDAG1C,8OAAC;wCAAI,WAAU;kDAAyF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUpI"}}]
}